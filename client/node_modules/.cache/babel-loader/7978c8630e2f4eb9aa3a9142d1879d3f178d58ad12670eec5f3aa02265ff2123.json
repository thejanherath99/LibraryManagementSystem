{"ast":null,"code":"var _jsxFileName = \"D:\\\\New folder\\\\LibraryManagementSystem-MERN-main\\\\client\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport { Routes, Route, BrowserRouter, useNavigate, Navigate } from \"react-router-dom\";\nimport Home from \"./pages/Home\";\nimport Login from \"./pages/Login\";\nimport Register from \"./pages/Register\";\nimport { Context } from './Context';\nimport Swal from 'sweetalert2';\nimport { useEffect, useState } from \"react\";\nimport Navbar from \"./Navbar\";\nimport axios from \"axios\";\nimport Protected from \"./Protected\";\nimport MyAccount from \"./pages/MyAccount\";\nimport AddBook from \"./pages/AddBook\";\nimport SingleBook from \"./pages/SingleBook\";\nimport AdminProtected from \"./AdminProtected\";\nimport RentedBooks from \"./pages/RentedBooks\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_BASE = \"http://localhost:8080\";\nfunction App() {\n  _s();\n  const [status, setStatus] = useState(false);\n  const token = localStorage.getItem('rfkey');\n  const checkLogin = async () => {\n    const user = {\n      refreshToken: token\n    };\n    const {\n      data: response\n    } = await axios.post('http://localhost:8080/api/refreshToken', user);\n    console.log(response.error);\n    if (response.error === false) {\n      setStatus(true);\n      console.log(\"setted true\");\n    } else {\n      setStatus(false);\n      console.log(\"setted false\");\n    }\n  };\n  const [isAdmin, setIsAdmin] = useState(false);\n  useEffect(() => {\n    if (status === true) {\n      axios.get(`http://localhost:8080/api/users/getId/${localStorage.getItem(\"username\")}`).then(resp => {\n        console.log(resp.data);\n        if (resp.data.isAdmin === true) {\n          setIsAdmin(true);\n          console.log(isAdmin);\n        } else {\n          setIsAdmin(false);\n        }\n      });\n    }\n  }, [status, setStatus]);\n  useEffect(() => {\n    if (status === true) {\n      const {\n        data: response\n      } = axios.get(`http://localhost:8080/api/users/getId/${localStorage.getItem(\"username\")}`);\n      console.log(response);\n      if (response.isAdmin === true) {\n        setIsAdmin(true);\n        console.log(isAdmin);\n      } else {\n        setIsAdmin(false);\n      }\n    }\n  }, []);\n  useEffect(() => {\n    checkLogin();\n  }, []);\n  const logOut = async () => {\n    await fetch(API_BASE + \"/api/refreshToken\", {\n      method: \"DELETE\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        refreshToken: localStorage.getItem(\"rfkey\")\n      })\n    }).then(res => {\n      if (res.ok) {\n        localStorage.setItem(\"rfkey\", \"\");\n        console.log(\"logged out successfully\");\n        window.location.reload(false);\n        setStatus(false);\n        console.log(status);\n      } else {\n        console.log(\"Cannot logout\");\n      }\n    });\n    localStorage.removeItem(\"isLogged\");\n  };\n  return /*#__PURE__*/_jsxDEV(Context.Provider, {\n    children: /*#__PURE__*/_jsxDEV(BrowserRouter, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(Navbar, {\n          logOut: logOut,\n          status: status,\n          isAdmin: isAdmin\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Routes, {\n          children: [/*#__PURE__*/_jsxDEV(Route, {\n            path: \"/\",\n            element: /*#__PURE__*/_jsxDEV(Home, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 38\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/book/:id\",\n            element: /*#__PURE__*/_jsxDEV(SingleBook, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 46\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/register\",\n            element: /*#__PURE__*/_jsxDEV(Register, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 46\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/login\",\n            element: /*#__PURE__*/_jsxDEV(Login, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 43\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/my-account\",\n            element: /*#__PURE__*/_jsxDEV(MyAccount, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 48\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/rented-books\",\n            element: /*#__PURE__*/_jsxDEV(RentedBooks, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 128,\n              columnNumber: 50\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/add-book\",\n            element: /*#__PURE__*/_jsxDEV(AddBook, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/profile\",\n            element: /*#__PURE__*/_jsxDEV(Protected, {\n              isLoggedIn: status,\n              children: /*#__PURE__*/_jsxDEV(MyAccount, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 138,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 115,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"jzfAXFN6pDEUcvuJ9aERPDruIB8=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["Routes","Route","BrowserRouter","useNavigate","Navigate","Home","Login","Register","Context","Swal","useEffect","useState","Navbar","axios","Protected","MyAccount","AddBook","SingleBook","AdminProtected","RentedBooks","API_BASE","App","status","setStatus","token","localStorage","getItem","checkLogin","user","refreshToken","data","response","post","console","log","error","isAdmin","setIsAdmin","get","then","resp","logOut","fetch","method","headers","body","JSON","stringify","res","ok","setItem","window","location","reload","removeItem"],"sources":["D:/New folder/LibraryManagementSystem-MERN-main/client/src/App.js"],"sourcesContent":["import { Routes, Route, BrowserRouter, useNavigate, Navigate } from \"react-router-dom\";\nimport Home from \"./pages/Home\";\nimport Login from \"./pages/Login\";\nimport Register from \"./pages/Register\";\nimport { Context } from './Context';\nimport Swal from 'sweetalert2'\nimport { useEffect, useState } from \"react\";\nimport Navbar from \"./Navbar\";\nimport axios from \"axios\";\nimport Protected from \"./Protected\";\n\n\n\nimport MyAccount from \"./pages/MyAccount\";\nimport AddBook from \"./pages/AddBook\";\nimport SingleBook from \"./pages/SingleBook\";\nimport AdminProtected from \"./AdminProtected\";\nimport RentedBooks from \"./pages/RentedBooks\";\n\n\nconst API_BASE = \"http://localhost:8080\";\n\nfunction App() {\n\n  const [status, setStatus] = useState(false);\n  const token = localStorage.getItem('rfkey');\n\n\n  const checkLogin = async () => {\n    const user = {\n      refreshToken: token,\n    };\n\n    const { data: response } = await axios.post('http://localhost:8080/api/refreshToken', user)\n    console.log(response.error);\n    if (response.error === false) {\n      setStatus(true);\n      console.log(\"setted true\");\n    }\n    else {\n      setStatus(false);\n      console.log(\"setted false\");\n    }\n  }\n\n  const [isAdmin, setIsAdmin] = useState(false);\n\n  useEffect(() => {\n    if (status === true) {\n      axios.get(`http://localhost:8080/api/users/getId/${localStorage.getItem(\"username\")}`).then(resp => {\n        console.log(resp.data);\n        if (resp.data.isAdmin === true) {\n          setIsAdmin(true);\n          console.log(isAdmin)\n        }\n        else {\n          setIsAdmin(false);\n        }\n      });\n    }\n  }, [status, setStatus]);\n\n  useEffect(() => {\n    if (status === true) {\n      const { data: response } = axios.get(`http://localhost:8080/api/users/getId/${localStorage.getItem(\"username\")}`);\n        console.log(response);\n        if (response.isAdmin === true) {\n          setIsAdmin(true);\n          console.log(isAdmin)\n        }\n        else {\n          setIsAdmin(false);\n        }\n\n    }\n  }, []);\n\n\n\n  useEffect(() => {\n    checkLogin();\n  }, []);\n\n  const logOut = async () => {\n\n\n    await fetch(API_BASE + \"/api/refreshToken\", {\n      method: \"DELETE\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        refreshToken: localStorage.getItem(\"rfkey\"),\n      })\n    }).then((res) => {\n      if (res.ok) {\n        localStorage.setItem(\"rfkey\", \"\");\n        console.log(\"logged out successfully\");\n        window.location.reload(false);\n        setStatus(false);\n        console.log(status);\n      }\n      else {\n        console.log(\"Cannot logout\");\n\n      }\n\n    })\n    localStorage.removeItem(\"isLogged\");\n  };\n\n\n\n  return (\n    <Context.Provider>\n      <BrowserRouter>\n        <div>\n          <Navbar logOut={logOut} status={status} isAdmin={isAdmin}/>\n          <Routes>\n\n            <Route path='/' element={<Home />} />\n\n            <Route path='/book/:id' element={<SingleBook />} />\n            <Route path='/register' element={<Register />} />\n            <Route path='/login' element={<Login />} />\n            <Route path='/my-account' element={<MyAccount />} />\n\n            <Route path='/rented-books' element={<RentedBooks />} />\n            \n            <Route path='/add-book' element={\n              \n                <AddBook />\n              \n            } />\n\n            <Route path='/profile' element={\n              <Protected isLoggedIn={status}>\n                <MyAccount />\n              </Protected>\n            } />\n\n          </Routes>\n        </div>\n\n      </BrowserRouter>\n    </Context.Provider>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}